
## **1. Обычные комментарии**

**Синтаксис**:
```rust
// Однострочный комментарий
let x = 5; // Пояснение к переменной

/*
 Многострочный комментарий
 для сложных пояснений
*/
```

**Когда использовать**:
- Пояснение неочевидных решений
- Временное отключение кода (`// let y = x + 1;`)

**Пример**:
```rust
// Важно: используем быструю сортировку, 
// так как данные почти отсортированы
@fast fn sort(data: &mut [i32]) {
    quicksort(data);
}
```

---

## **2. Документирующие комментарии (///)**

**Синтаксис**:
```rust
/// Вычисляет факториал числа
/// 
/// # Пример
/// ```
/// let n = factorial(5); // 120
/// ```
constexpr fn factorial(n: u32) -> u32 {
    if n == 0 { 1 } else { n * factorial(n - 1) }
}

```

**Особенности**:
- Поддержка Markdown
- Генерация документации через `carbide doc`
- Автоматическая проверка примеров

---

## **3. Комментарии для компилятора**

**Синтаксис**:
```rust
//! Настройки модуля
//! - Оптимизация: high
//! - Безопасность: strict

#![allow(unused_variables)] // Разрешить неиспользуемые переменные
```

**Где использовать**:
- В начале файлов (`main.cb`)
- Для управления линтерами

---

## **4. Сравнение с Rust**

|Тип|Rust|Carbide|Особенность Carbide|
|---|---|---|---|
|Однострочный|`//`|`//`|То же самое|
|Многострочный|`/* */`|`/* */`|Рекомендуется `///` вместо них|
|Документирующий|`///`|`///`|Встроенная проверка примеров|
|Модульный|`//!`|`//!`|Поддержка аннотаций|

---

## **5. Идиоматичный Carbide**

**Плохо**:
```rust
let x = 5; // Присваиваем 5
```

**Хорошо**:
```rust
// Критично для производительности (см. issue #42)
let x = 5; 

/// Конфигурация сервера
/// - timeout: 30s
/// - retries: 3
struct ServerConfig {
    // ...
}
```

---

## **6. Лучшие практики**

1. **Избегайте избыточных комментариев**
```rust
	// +1: Плохо
	++x;
```
    
3. **Комментируйте «почему», а не «что»**
    ```rust
	// Хорошо:
    // Используем Barrett reduction вместо % 
    // из-за специфики аппаратуры (bug #2024)
    let z = reduce(x);
	```
    
4. **Для сложной логики — документирующие комментарии**
    ```rust
    /// Реализация алгоритма A* 
    /// с оптимизацией для 2D-карт
    @fast fn pathfind() { ... }
    ```
    

---

## **Итог**  
Код должен быть самодокументируемым, но когда это невозможно — комментарии становятся строго структурированной документацией.